<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Pinkyâ€™s Hen Party Guest List ğŸ’âœ¨ğŸ¥‚</title>
<style>
  :root {
    /* Champagne-forward palette with blush accents */
    --champagne:#f7e9d7;   /* main background wash */
    --champagne-deep:#eadcc9;
    --champagne-ink:#1f1f1f;
    --blush:#ffd9e8;
    --rose:#ffeaf4;
    --soft-ivory:#fffdf8;

    --radius:16px;
    --shadow:0 10px 30px rgba(0,0,0,.08);
    --pad:18px;
  }
  body{
    font-family: system-ui, -apple-system, Segoe UI, Roboto, Inter, sans-serif;
    background: linear-gradient(135deg, var(--soft-ivory), var(--champagne));
    margin:0; color:var(--champagne-ink);
  }
  .wrap{
    max-width:760px; margin:6vh auto; background:#fff; border-radius:var(--radius);
    box-shadow:var(--shadow); padding:clamp(16px,3vw,34px); border:1px solid var(--champagne-deep);
    animation: floatIn .6s ease-out both;
  }

  /* Subtle, elegant animations */
  @keyframes floatIn { from {opacity:0; transform: translateY(8px);} to {opacity:1; transform: translateY(0);} }
  @keyframes softPulse { 0%,100%{transform:translateZ(0)} 50%{transform:translateZ(0) scale(1.02)} }
  @keyframes shimmer { 0%{background-position:-200% 0} 100%{background-position:200% 0} }
  @keyframes cardIn { from{opacity:0; transform:translateY(6px)} to{opacity:1; transform:translateY(0)} }
  @keyframes floatUp { from{transform:translateY(0); opacity:1} to{transform:translateY(-30px); opacity:0} }

  .tag{
    display:inline-flex; gap:6px; align-items:center;
    padding:6px 10px; border-radius:999px; font-size:12px; margin-bottom:10px; color:#7a5a2f;
    background: linear-gradient(90deg, #f4e6cf 20%, #fff 40%, #f4e6cf 60%);
    background-size:200% 100%; animation: shimmer 2.5s linear infinite;
    border:1px solid #e7d7bd;
  }
  h1{font-size:clamp(26px,3.6vw,36px); margin:.2rem 0 .4rem}
  .sub{font-size:15px; opacity:.9; line-height:1.5}

  /* Optional round image */
  .heroimg{
    max-width:180px; border-radius:50%; margin:16px auto 4px; display:none;
    box-shadow:0 6px 18px rgba(0,0,0,.14); border:4px solid #fff; animation: softPulse 4s ease-in-out infinite;
  }

  .note{background:#fbf4e9; border-left:4px solid #cfb68a; padding:12px; border-radius:12px; margin:14px 0}
  .card{border:1px solid #eee; border-radius:12px; padding:var(--pad); margin:14px 0; animation: cardIn .4s ease both}
  .row{display:flex; flex-wrap:wrap; gap:10px}
  .row>*{flex:1 1 180px}
  label{font-size:13px; opacity:.75; display:block; margin-bottom:6px}
  input,textarea{width:100%; border:1px solid #ddd; border-radius:10px; padding:10px 12px; font-size:15px; background:#fffdfb}
  textarea{min-height:80px}
  .pill{display:inline-flex; align-items:center; gap:8px; background:#f6f6f7; padding:8px 10px; border-radius:999px; font-size:13px; margin-top:6px}
  .muted{opacity:.65}
  .btn{
    border:0; border-radius:999px; padding:12px 18px; font-weight:600; cursor:pointer;
    transition: transform .08s ease, box-shadow .2s ease, opacity .2s ease;
    background: linear-gradient(180deg, #fff, #f6f2ea);
  }
  .btn:hover{transform: translateY(-1px)}
  .add{background: linear-gradient(180deg, var(--blush), #ffeef6)}
  .submit{background: linear-gradient(180deg, #2a2824, #111); color:#fff; position:relative}

  /* Progress dots animation on the Send button when loading */
  .submit.loading{
    opacity:.9;
  }
  .submit.loading::after{
    content: " â€¢  â€¢  â€¢";
    position:absolute; right:16px; top:50%; transform:translateY(-50%);
    letter-spacing:2px;
    animation: dots 1s steps(4,end) infinite;
  }
  @keyframes dots {
    0% {opacity:.2}
    50% {opacity:1}
    100% {opacity:.2}
  }

  .ok{background:#e8fff1; color:#0b7a3b; padding:10px 12px; border-radius:10px; display:none; margin-top:12px}
  .err{background:#fff1f1; color:#a40000; padding:10px 12px; border-radius:10px; display:none; margin-top:12px}
  .divider{height:1px; background:linear-gradient(90deg,transparent,#eee,transparent); margin:14px 0}

  /* Confetti (tiny emoji burst) */
  .burst{
    position:absolute; pointer-events:none; font-size:20px; user-select:none;
    animation: floatUp 700ms ease-out forwards;
  }
  .stage{position:relative}
  .cele-strip{
    text-align:center; margin:6px 0 12px; font-size:20px;
  }
</style>
</head>
<body>
<div class="wrap stage">
  <span class="tag">hen party helper âœ¨ ğŸ’ ğŸ¥‚</span>
  <h1>Hey Pinky! ğŸ’–</h1>

  <!-- Updated message you approved -->
  <p class="sub">
    Itâ€™s time to put together your <strong>VIP hen party guest list</strong> ğŸ’ğŸ¥‚<br>
    Add the names of the lovely people youâ€™d like to celebrate with.
  </p>
  <p class="sub">
    No pressure â€” even just a couple of your closest ones is perfect.<br>
    The hen will be on <strong>Thursday 11th of September</strong>, so once this is done you can sit back, relax, and focus on your big day! ğŸ’–
  </p>

  <div class="cele-strip">âœ¨ ğŸ’ ğŸ¥‚ ğŸŒ¸ âœˆï¸ ğŸ‰</div>

  <!-- Optional photo â€“ auto-hides if no URL is provided -->
  <img id="hero" class="heroimg" src="PHOTO_URL_HERE" alt="Tariro (Pinky)">

  <div class="note">
    Champagne-chic vibes welcome â€¢ Soft blush details â€¢ A sprinkle of sparkle âœ¨
  </div>

  <div class="card">
    <div class="row">
      <div>
        <label>Your name</label>
        <input id="sisterName" value="Tariro (Pinky)" placeholder="e.g., Tariro (Pinky)">
      </div>
      <div>
        <label>Any notes for the planner?</label>
        <input id="globalNotes" placeholder="Bridesmaids, dietary, travel notesâ€¦">
      </div>
    </div>
  </div>

  <div class="divider"></div>

  <div id="guestList"></div>

  <div class="row" style="margin:10px 0;">
    <button class="btn add" id="addBtn">â• Add another guest</button>
    <span class="pill muted">Tip: leave email or phone blank if youâ€™re not sure yet.</span>
  </div>

  <button class="btn submit" id="submitBtn">Send to my planner ğŸ’Œ</button>
  <div class="ok" id="okBox">Got it! Your guests were sent. You can add more anytime.</div>
  <div class="err" id="errBox">Hmm, that didnâ€™t go through. Please try again.</div>

  <p class="muted" style="text-align:center;margin-top:14px">Made with love & confetti ğŸ‰</p>
</div>

<script>
/* =============== CONFIG =============== */
const ENDPOINT = "YOUR_WEB_APP_URL_HERE"; // Apps Script Web App URL
/* ===================================== */

const guestList = document.getElementById('guestList');
const addBtn = document.getElementById('addBtn');
const submitBtn = document.getElementById('submitBtn');
const okBox = document.getElementById('okBox');
const errBox = document.getElementById('errBox');
const sisterNameInput = document.getElementById('sisterName');
const globalNotesInput = document.getElementById('globalNotes');
const hero = document.getElementById('hero');

// Hide hero image if no URL provided
if (!hero.src || hero.src.includes('PHOTO_URL_HERE')) hero.style.display = 'none';

function guestCard(){
  const div = document.createElement('div');
  div.className = 'card guest';
  div.style.animationDelay = (guestList.querySelectorAll('.guest').length * 60) + 'ms';
  div.innerHTML = `
    <div class="row">
      <div>
        <label>Guest name</label>
        <input placeholder="e.g., Alex Morgan" data-k="name" required>
      </div>
      <div>
        <label>Guest email</label>
        <input type="email" placeholder="e.g., alex@email.com" data-k="email">
      </div>
      <div>
        <label>Guest phone</label>
        <input placeholder="e.g., +44 7..." data-k="phone">
      </div>
    </div>
    <div style="margin-top:10px;">
      <label>Notes</label>
      <textarea placeholder="e.g., bridesmaid, vegan, travelling from Leeds" data-k="notes"></textarea>
    </div>
    <div style="display:flex;justify-content:flex-end;margin-top:8px;">
      <button type="button" class="btn" onclick="this.closest('.card').remove()">Remove</button>
    </div>
  `;
  return div;
}

function addGuest(){
  guestList.appendChild(guestCard());
}
addBtn.addEventListener('click', addGuest);
addGuest(); // start with one row

// Tiny celebratory emoji burst on success (tasteful, brief)
function celebrate() {
  const emojis = ['ğŸ’–','âœ¨','ğŸ¥‚','ğŸŒ¸','ğŸ‰','ğŸ’'];
  const stage = document.querySelector('.stage');
  const rect = stage.getBoundingClientRect();
  for (let i=0; i<12; i++){
    const span = document.createElement('span');
    span.className = 'burst';
    span.textContent = emojis[Math.floor(Math.random()*emojis.length)];
    span.style.left = (Math.random()*(rect.width-40)+10) + 'px';
    span.style.top = (submitBtn.offsetTop - 10) + 'px';
    span.style.transform = `translateY(${Math.random()*8-4}px)`;
    span.style.opacity = 0.9;
    stage.appendChild(span);
    setTimeout(()=> span.remove(), 800);
  }
}

async function submit(){
  okBox.style.display = 'none';
  errBox.style.display = 'none';

  const cards = [...guestList.querySelectorAll('.card.guest')];
  if (!cards.length){
    errBox.textContent = 'Add at least one guest name.';
    errBox.style.display = 'block';
    return;
  }

  const guests = cards.map(card => {
    const obj = {};
    card.querySelectorAll('[data-k]').forEach(i => obj[i.dataset.k] = i.value.trim());
    return obj;
  }).filter(g => g.name);

  const payload = {
    sisterName: sisterNameInput.value.trim() || "Tariro (Pinky)",
    notes: globalNotesInput.value.trim(),
    guests
  };

  try{
    // Start loading state with progress dots
    submitBtn.disabled = true;
    submitBtn.classList.add('loading');
    submitBtn.textContent = 'Sending';

    await fetch(ENDPOINT, {
      method:'POST', mode:'no-cors',
      headers:{'Content-Type':'application/json'},
      body: JSON.stringify(payload)
    });

    okBox.style.display = 'block';
    celebrate(); // celebratory moment âœ¨
    guestList.innerHTML = ''; addGuest(); globalNotesInput.value = '';
  }catch(e){
    errBox.textContent = 'Could not send. Please try again.';
    errBox.style.display = 'block';
  }finally{
    // End loading state
    submitBtn.classList.remove('loading');
    submitBtn.disabled = false;
    submitBtn.textContent = 'Send to my planner ğŸ’Œ';
  }
}
submitBtn.addEventListener('click', submit);
</script>
</body>
</html>
